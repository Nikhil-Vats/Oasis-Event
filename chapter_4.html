<!DOCTYPE html>
<html>
<head>
    <title>Far Out Diaries: Chapter 4</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="icon" type="image/png" href="favicon.png" sizes="64x64" />
    <link href="css/loader.css" type="text/css" rel="stylesheet" />
    <link href="css/style.css" type="text/css" rel="stylesheet" />
    <script src="https://www.gstatic.com/firebasejs/5.4.1/firebase.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <link rel="stylesheet" href="css/space.css">
    <style>
    .round_instruct {
        margin-bottom: 2vh;
    }
    .round_descrip {
        margin: 1vh 0;
    }
    </style>
</head>
<body>   
    <div style="display: none;">
        <img src="images/hat_civ_webd.png">
        <img src="images/skull_webd.png">
        <img src="images/guitar.png">
    </div>
    <div id="loading">
        <div id="particles-background" style="background-image: linear-gradient(to top, #0ba360 0%, #3cba92 100%);" class="vertical-centered-box"></div>
        <div id="particles-foreground" class="vertical-centered-box"></div>
        
        <div class="vertical-centered-box">
            <div class="content">
            <div class="loader-circle"></div>
            <div class="loader-line-mask">
                <div class="loader-line"></div>
            </div>
            <img src="images/favicon.png" width="36" height="36" id="prism-logo">
            </div>
        </div>            
    </div>
    <div id="warning-message">
        <img src="./images/rotate.svg">
    </div>
    <div id="wrapper">
    <div class="fetching" style="font-family: 'Raleway', sans-serif;">
            <p>Hang in there, we are fetching data....</p>
    </div>
    <div class="status" style="position: absolute;left: 0;top: 12vh;z-index: 4000;background: transparent;" id="launch-screen-title">
            Sorry you are not eligible for this round!
    </div>
    <div class="container" style="background: transparent;z-index: 30; height: 100vh; top:0;">
            <div class="top_nav" style="background: transparent;top: 0;height: 12vh;width: 100vw;position: fixed;z-index: 500;">
                    <div id="fest_icon"><img id="fest_img" src="images/favicon.png" onclick="showSidenav()"></div>
                    <div class="round_name" id="ch4">Chapter 4: The end awaits!</div>
                    <div class="score2">Your Score: <span id="y_score">-</span></div>
                    <!-- <div class="score2">Team Score: <span id="t_score">-</span></div> -->
                    <div id="instructions_btn"><img onclick="toggleInstructions()" src="./images/instructions.svg"/></div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                </div>
            <canvas id="canvas"></canvas>
    </div>
    <div id="Score"></div> 
    </div>
    <div id="stats" style="margin-top: 20vh;font-family: 'Raleway', sans-serif;
    box-shadow: inset 0 0 5px white, inset 0 0 6px white, inset 0 0 7px white,
     inset 0 0 8px white, inset 0 0 9px white, inset 0 0 10px white, inset 0 0 12px white;">
        <p style="margin-top:9vh;margin-bottom: 10vh;">Your score for this chapter is <span id="game-over-score"></span>.</p>
        <a id="chapter-button" style="margin-top: 30vh;" onclick="nextChapter(5)">Next Chapter</a>
    </div>
    <div class="instructions">
            <img id="close_btn" onclick="toggleInstructions()" src="./images/close.svg">
            <p class="heading">Instructions</p>
            <p class="round_instruct">Chapter 4: The end awaits!</p>
            <p class="round_descrip">
               In this chapter, you have to protect the group of punks and hippies from the skulls
               by using some jigglypuff kind of music.
               For each skull destroyed you get 30 points.
            </p>
            <p class="round_instruct">Other Information - </p>
            <p class="round_descrip">
                Your final score will be the total of your scores in each chapter.
            </p>
            <p class="round_descrip">
                The score shown on each chapter's page is the sum of scores of previous chapter.
            </p>
            <p class="round_descrip">
                    The score shown on each chapter's page is the sum of scores of previous chapter. Final score and latest 
                    ranking can be seen on the results page at any time.
            </p>
            <p class="round_descrip">
                    The top players as on 27th October 2018, 12:00AM will get to play the VR game on Oculus Rift developed by Coding
                    Club.
            </p>
        </div>
        <div id="close" onclick="closeSidenav()">
            <div id="close_div"></div>
        </div> 
        <div id="sidenav">
        <div id="sidenav_bg1">
        </div>
        <div id="sidenav_content">
            <ul id="list">
                <a href="./chapter_1.html" class="link"><li>Chapter 1</li></a>
                <a href="./chapter_2.html" class="link"><li>Chapter 2</li></a>
                <a href="./chapter_3.html" class="link"><li>Chapter 3</li></a>
                <a href="./chapter_4.html" class="link"><li style="color: #4dd0e1;
                    text-shadow: 0 0 5px #4dd0e1, 0 0 10px #4dd0e1, 0 0 20px #4dd0e1, 0 0 30px #4dd0e1, 0 0 40px #4dd0e1, 0 0 55px #4dd0e1, 0 0 75px #4dd0e1;">Chapter 4</li></a>
                <a href="./chapter_5.html" class="link"><li>Chapter 5</li></a>
                <a href="./results.html" class="link"><li>Results</li></a>
                <a href="./developers.html" class="link"><li style="color: #4dd0e1;
                    text-shadow: 0 0 5px #4dd0e1, 0 0 10px #4dd0e1, 0 0 20px #4dd0e1, 0 0 30px #4dd0e1, 0 0 40px #4dd0e1, 0 0 55px #4dd0e1, 0 0 75px #4dd0e1;">Developers</li></a>
            </ul>
        </div>
        <div id="sidenav_bg2">
        </div>
        </div>
        </div>
        <script>
                const ch_status = 4;
            </script>
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.4.1/firebase-auth.js"></script>
    <script src="./js/firebase.js" type="text/javascript"></script>
    <!-- <script src="./js/auth.js" type="text/javascript"></script> -->
    <script src="./js/sidenav.js" type="text/javascript"></script>
    <script  src="js/nextChapter.js"></script>
    <script  src="js/loader.js"></script>
    <script  src="js/space.js"></script>
    <script>
        var show = 0;
        function toggleInstructions() {
            instrucDiv = document.getElementsByClassName('instructions')[0];
            if(!show) {
                instrucDiv.style.transform = 'scale(1)';
                show = 1;
            }
            else {
                instrucDiv.style.transform = 'scale(0)';
                show = 0;
            }    
        }
        var loaded = false;
        window.onload = function () {
            loaded = true;
        }
        var elapsed = true;
        setTimeout(function () {
            if(loaded && elapsed) {
                hideLoader();
            }
            else {
                showOnload();
            }
        }, 4000); 
        function showOnload() {
            // alert(4);
            if(document.readyState === "complete") {
            
                // alert(2);
                document.getElementById('loading').style.opacity = '0';
                document.getElementById('loading').style.transition = '0.3s ease-in-out';
                document.getElementById('prism-logo').style.display = 'none';
                document.getElementById('loading').style.display = 'none';
                document.getElementsByClassName('loader-line-mask')[0].style.display = 'none';
                document.getElementsByClassName('loader-circle')[0].style.display = 'none';
                document.getElementById('wrapper').style.opacity = '1';
                document.getElementById('wrapper').style.display = 'block';
            }
            else {
                window.onload = function () {
                document.getElementById('loading').style.opacity = '0';
                document.getElementById('loading').style.transition = '0.3s ease-in-out';
                document.getElementById('prism-logo').style.display = 'none';
                document.getElementById('loading').style.display = 'none';
                document.getElementsByClassName('loader-circle')[0].style.display = 'none';
                document.getElementsByClassName('loader-line-mask')[0].style.display = 'none';
                document.getElementById('wrapper').style.opacity = '1';
                document.getElementById('wrapper').style.display = 'block';
                }
            }
        }
        function hideLoader() {
            // alert(2);
            document.getElementById('loading').style.opacity = '0';
            document.getElementById('loading').style.transition = '0.3s ease-in-out';
            document.getElementById('prism-logo').style.display = 'none';
            document.getElementById('loading').style.display = 'none';
            document.getElementsByClassName('loader-circle')[0].style.display = 'none';
            document.getElementsByClassName('loader-line-mask')[0].style.display = 'none';
            document.getElementById('wrapper').style.opacity = '1';
            document.getElementById('wrapper').style.display = 'block';
        }
        $(window).resize(function(){
            var viewportHeight = $(window).height();
            $('#particles-foreground').css({ height: viewportHeight });
        });
        checkState();
        checkStatus(4);
    </script>
</body>
</html>        